{"ast":null,"code":"import { __awaiter as e } from \"tslib\";\nimport { Hub as s, DataStore as t } from \"aws-amplify\";\nimport { UI_CHANNEL as i, ACTION_DATASTORE_UPDATE_STARTED as o, EVENT_ACTION_DATASTORE_UPDATE as r, DATASTORE_QUERY_BY_ID_ERROR as d, ACTION_DATASTORE_UPDATE_FINISHED as m } from \"./constants.mjs\";\nimport { getErrorMessage as a } from \"../../helpers/utils.mjs\";\nimport { AMPLIFY_SYMBOL as n } from \"../../helpers/constants.mjs\";\nimport { useTypeCastFields as c } from \"./shared/useTypeCastFields.mjs\";\nconst f = ({\n  fields: f,\n  id: l,\n  model: p,\n  schema: h\n}) => {\n  const v = c({\n    fields: f,\n    modelName: p.name,\n    schema: h\n  });\n  return () => e(void 0, void 0, void 0, function* () {\n    try {\n      s.dispatch(i, {\n        event: o,\n        data: {\n          fields: v,\n          id: l\n        }\n      }, r, n);\n      const e = yield t.query(p, l);\n      if (!e) throw new Error(`${d}: ${l}`);\n      const a = yield t.save(p.copyOf(e, e => {\n        Object.assign(e, v);\n      }));\n      s.dispatch(i, {\n        event: m,\n        data: {\n          fields: v,\n          id: l,\n          item: a\n        }\n      }, r, n);\n    } catch (e) {\n      s.dispatch(i, {\n        event: m,\n        data: {\n          fields: v,\n          id: l,\n          errorMessage: a(e)\n        }\n      }, r, n);\n    }\n  });\n};\nexport { f as useDataStoreUpdateAction };","map":{"version":3,"names":["__awaiter","e","Hub","s","DataStore","t","UI_CHANNEL","i","ACTION_DATASTORE_UPDATE_STARTED","o","EVENT_ACTION_DATASTORE_UPDATE","r","DATASTORE_QUERY_BY_ID_ERROR","d","ACTION_DATASTORE_UPDATE_FINISHED","m","getErrorMessage","a","AMPLIFY_SYMBOL","n","useTypeCastFields","c","f","fields","id","l","model","p","schema","h","v","modelName","name","dispatch","event","data","query","Error","save","copyOf","Object","assign","item","errorMessage","useDataStoreUpdateAction"],"sources":["C:/Users/Chris Chan/softone/node_modules/@aws-amplify/ui-react/dist/esm/hooks/actions/useDataStoreUpdateAction.mjs"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import{Hub as s,DataStore as t}from\"aws-amplify\";import{UI_CHANNEL as i,ACTION_DATASTORE_UPDATE_STARTED as o,EVENT_ACTION_DATASTORE_UPDATE as r,DATASTORE_QUERY_BY_ID_ERROR as d,ACTION_DATASTORE_UPDATE_FINISHED as m}from\"./constants.mjs\";import{getErrorMessage as a}from\"../../helpers/utils.mjs\";import{AMPLIFY_SYMBOL as n}from\"../../helpers/constants.mjs\";import{useTypeCastFields as c}from\"./shared/useTypeCastFields.mjs\";const f=({fields:f,id:l,model:p,schema:h})=>{const v=c({fields:f,modelName:p.name,schema:h});return()=>e(void 0,void 0,void 0,(function*(){try{s.dispatch(i,{event:o,data:{fields:v,id:l}},r,n);const e=yield t.query(p,l);if(!e)throw new Error(`${d}: ${l}`);const a=yield t.save(p.copyOf(e,(e=>{Object.assign(e,v)})));s.dispatch(i,{event:m,data:{fields:v,id:l,item:a}},r,n)}catch(e){s.dispatch(i,{event:m,data:{fields:v,id:l,errorMessage:a(e)}},r,n)}}))};export{f as useDataStoreUpdateAction};\n"],"mappings":"AAAA,SAAOA,SAAS,IAAIC,CAAC,QAAK,OAAO;AAAC,SAAOC,GAAG,IAAIC,CAAC,EAACC,SAAS,IAAIC,CAAC,QAAK,aAAa;AAAC,SAAOC,UAAU,IAAIC,CAAC,EAACC,+BAA+B,IAAIC,CAAC,EAACC,6BAA6B,IAAIC,CAAC,EAACC,2BAA2B,IAAIC,CAAC,EAACC,gCAAgC,IAAIC,CAAC,QAAK,iBAAiB;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,6BAA6B;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,gCAAgC;AAAC,MAAMC,CAAC,GAACA,CAAC;EAACC,MAAM,EAACD,CAAC;EAACE,EAAE,EAACC,CAAC;EAACC,KAAK,EAACC,CAAC;EAACC,MAAM,EAACC;AAAC,CAAC,KAAG;EAAC,MAAMC,CAAC,GAACT,CAAC,CAAC;IAACE,MAAM,EAACD,CAAC;IAACS,SAAS,EAACJ,CAAC,CAACK,IAAI;IAACJ,MAAM,EAACC;EAAC,CAAC,CAAC;EAAC,OAAM,MAAI5B,CAAC,CAAC,KAAK,CAAC,EAAC,KAAK,CAAC,EAAC,KAAK,CAAC,EAAE,aAAW;IAAC,IAAG;MAACE,CAAC,CAAC8B,QAAQ,CAAC1B,CAAC,EAAC;QAAC2B,KAAK,EAACzB,CAAC;QAAC0B,IAAI,EAAC;UAACZ,MAAM,EAACO,CAAC;UAACN,EAAE,EAACC;QAAC;MAAC,CAAC,EAACd,CAAC,EAACQ,CAAC,CAAC;MAAC,MAAMlB,CAAC,GAAC,MAAMI,CAAC,CAAC+B,KAAK,CAACT,CAAC,EAACF,CAAC,CAAC;MAAC,IAAG,CAACxB,CAAC,EAAC,MAAM,IAAIoC,KAAK,CAAE,GAAExB,CAAE,KAAIY,CAAE,EAAC,CAAC;MAAC,MAAMR,CAAC,GAAC,MAAMZ,CAAC,CAACiC,IAAI,CAACX,CAAC,CAACY,MAAM,CAACtC,CAAC,EAAEA,CAAC,IAAE;QAACuC,MAAM,CAACC,MAAM,CAACxC,CAAC,EAAC6B,CAAC,CAAC;MAAA,CAAE,CAAC,CAAC;MAAC3B,CAAC,CAAC8B,QAAQ,CAAC1B,CAAC,EAAC;QAAC2B,KAAK,EAACnB,CAAC;QAACoB,IAAI,EAAC;UAACZ,MAAM,EAACO,CAAC;UAACN,EAAE,EAACC,CAAC;UAACiB,IAAI,EAACzB;QAAC;MAAC,CAAC,EAACN,CAAC,EAACQ,CAAC,CAAC;IAAA,CAAC,QAAMlB,CAAC,EAAC;MAACE,CAAC,CAAC8B,QAAQ,CAAC1B,CAAC,EAAC;QAAC2B,KAAK,EAACnB,CAAC;QAACoB,IAAI,EAAC;UAACZ,MAAM,EAACO,CAAC;UAACN,EAAE,EAACC,CAAC;UAACkB,YAAY,EAAC1B,CAAC,CAAChB,CAAC;QAAC;MAAC,CAAC,EAACU,CAAC,EAACQ,CAAC,CAAC;IAAA;EAAC,CAAE,CAAC;AAAA,CAAC;AAAC,SAAOG,CAAC,IAAIsB,wBAAwB"},"metadata":{},"sourceType":"module","externalDependencies":[]}